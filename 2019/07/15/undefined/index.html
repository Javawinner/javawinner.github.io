<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>Django之ORM | Gorg Chen</title><meta name="description" content="Django之ORM"><meta name="keywords" content="django"><meta name="author" content="Gorg Chen"><meta name="copyright" content="Gorg Chen"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="canonical" href="http://cjwnb.top/2019/07/15/undefined/"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="Django之ORM"><meta name="twitter:description" content="Django之ORM"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/Photo/avatar.png"><meta property="og:type" content="article"><meta property="og:title" content="Django之ORM"><meta property="og:url" content="http://cjwnb.top/2019/07/15/undefined/"><meta property="og:site_name" content="Gorg Chen"><meta property="og:description" content="Django之ORM"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/Photo/avatar.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="next" title="django基础" href="http://cjwnb.top/2019/07/09/undefined/"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":1,"translateDelay":0,"cookieDomain":"http://cjwnb.top/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  highlight_copy: 'true',
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  bookmark: {
    title: 'Bookmark',
    message_prev: 'Press',
    message_next: 'to bookmark this page'
  },
  runtime_unit: 'days'

  
}</script></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#创建ORM"><span class="toc-number">1.</span> <span class="toc-text">创建ORM</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#数据库迁移（同步）命令"><span class="toc-number">1.0.1.</span> <span class="toc-text">数据库迁移（同步）命令</span></a></li></ol></li></ol><li class="toc-item toc-level-3"><a class="toc-link" href="#使用ORM"><span class="toc-number">2.</span> <span class="toc-text">使用ORM</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#新增数据"><span class="toc-number">2.1.</span> <span class="toc-text">新增数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询数据"><span class="toc-number">2.2.</span> <span class="toc-text">查询数据</span></a></li></ol></li></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/Photo/post.png)"><div id="page-header"><span class="pull-left"> <a class="blog_title" id="site-name" href="/">Gorg Chen</a></span><div class="open toggle-menu pull-right"><div class="menu-icon-first"></div><div class="menu-icon-second"></div><div class="menu-icon-third"></div></div><span class="pull-right menus"><div class="mobile_author_icon"><img class="lozad" data-src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/Photo/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'"><div class="mobile_author-info__description"></div></div><hr><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 档案</span></a><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 大佬博客</span></a><script>document.body.addEventListener('touchstart', function(){ });</script></div></span><span class="pull-right"></span></div><div id="post-info"><div id="post-title"><div class="posttitle">Django之ORM</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> Created 2019-07-15<span class="post-meta__separator">|</span><i class="fa fa-history" aria-hidden="true"></i> Updated 2019-07-15</time></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><h3 id="创建ORM"><a href="#创建ORM" class="headerlink" title="创建ORM"></a>创建ORM</h3><p><code>什么是ORM？</code></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">对象关系映射</span><br><span class="line">		类			&gt;&gt;&gt;  表</span><br><span class="line">		对象   		&gt;&gt;&gt;   表记录</span><br><span class="line">		对象的属性  &gt;&gt;&gt;  一条记录某个字段对应的值</span><br></pre></td></tr></table></figure>

<p>django的orm不能够自动帮你创建库，但是可以自动帮你创建表</p>
<p>提示:一个django项目就使用一个库，不要多个django项目使用一个库</p>
<h5 id="数据库迁移（同步）命令"><a href="#数据库迁移（同步）命令" class="headerlink" title="数据库迁移（同步）命令"></a>数据库迁移（同步）命令</h5><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">python3</span> <span class="selector-tag">manage</span><span class="selector-class">.py</span> <span class="selector-tag">makemigrations</span>  将你的数据库变动记录到一个小本本上(并不会帮你创建表)</span><br><span class="line"><span class="selector-tag">python3</span> <span class="selector-tag">manage</span><span class="selector-class">.py</span> <span class="selector-tag">migrate</span>         将你的数据库变动正在同步到数据库中</span><br></pre></td></tr></table></figure>

<p>#####案例<br><code>models.py</code></p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">from</span> <span class="selector-tag">django</span><span class="selector-class">.db</span> <span class="selector-tag">import</span> <span class="selector-tag">models</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># <span class="selector-tag">Create</span> <span class="selector-tag">your</span> <span class="selector-tag">models</span> <span class="selector-tag">here</span>.</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">class</span> <span class="selector-tag">User</span>(<span class="selector-tag">models</span><span class="selector-class">.Model</span>):</span><br><span class="line">    # <span class="selector-tag">User</span>表的主键字段名就是<span class="selector-tag">id</span></span><br><span class="line">    id = models.AutoField(primary_key=True)</span><br><span class="line">    # <span class="selector-tag">varchar</span>(32) <span class="selector-tag">name</span>字段是<span class="selector-tag">varchar</span>(32)  <span class="selector-tag">CharField</span>在定义的时候必须要加<span class="selector-tag">max_length</span>参数，</span><br><span class="line">        不加直接报错</span><br><span class="line">    name = models.CharField(max_length=32)</span><br><span class="line">    # <span class="selector-tag">varchar</span>(32) <span class="selector-tag">password</span>字段是<span class="selector-tag">varchar</span>(32)  <span class="selector-tag">CharField</span>在定义的时候必须要加<span class="selector-tag">max_length</span>参数</span><br><span class="line">      不加直接报错</span><br><span class="line">    password=models.CharField(max_length=32)</span><br></pre></td></tr></table></figure>

<p><code>创建数据库djang2</code><br><img src="https://upload-images.jianshu.io/upload_images/17844223-9eb9637dececc81b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt><br><code>重启Django服务</code><br><img src="https://upload-images.jianshu.io/upload_images/17844223-259f0f911e358559.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt><br><code>命令行执行命令</code></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">$ python3 manage.py makemigrations</span><br><span class="line">Migrations for 'app01':</span><br><span class="line">  app01/migrations/0001_initial.py</span><br><span class="line">    <span class="selector-tag">-</span> <span class="selector-tag">Create</span> <span class="selector-tag">model</span> <span class="selector-tag">User</span></span><br><span class="line">$ python3 manage.py migrate  </span><br><span class="line"><span class="selector-tag">Operations</span> <span class="selector-tag">to</span> <span class="selector-tag">perform</span>:</span><br><span class="line">  <span class="selector-tag">Apply</span> <span class="selector-tag">all</span> <span class="selector-tag">migrations</span>: <span class="selector-tag">admin</span>, <span class="selector-tag">app01</span>, <span class="selector-tag">auth</span>, <span class="selector-tag">contenttypes</span>, <span class="selector-tag">sessions</span></span><br><span class="line"><span class="selector-tag">Running</span> <span class="selector-tag">migrations</span>:</span><br><span class="line">  <span class="selector-tag">Applying</span> <span class="selector-tag">contenttypes</span><span class="selector-class">.0001_initial</span>... <span class="selector-tag">OK</span></span><br><span class="line">  <span class="selector-tag">Applying</span> <span class="selector-tag">auth</span><span class="selector-class">.0001_initial</span>... <span class="selector-tag">OK</span></span><br><span class="line">  <span class="selector-tag">Applying</span> <span class="selector-tag">admin</span><span class="selector-class">.0001_initial</span>... <span class="selector-tag">OK</span></span><br><span class="line">  <span class="selector-tag">Applying</span> <span class="selector-tag">admin</span><span class="selector-class">.0002_logentry_remove_auto_add</span>... <span class="selector-tag">OK</span></span><br><span class="line">  <span class="selector-tag">Applying</span> <span class="selector-tag">app01</span><span class="selector-class">.0001_initial</span>... <span class="selector-tag">OK</span></span><br><span class="line">  <span class="selector-tag">Applying</span> <span class="selector-tag">contenttypes</span><span class="selector-class">.0002_remove_content_type_name</span>... <span class="selector-tag">OK</span></span><br><span class="line">  <span class="selector-tag">Applying</span> <span class="selector-tag">auth</span><span class="selector-class">.0002_alter_permission_name_max_length</span>... <span class="selector-tag">OK</span></span><br><span class="line">  <span class="selector-tag">Applying</span> <span class="selector-tag">auth</span><span class="selector-class">.0003_alter_user_email_max_length</span>... <span class="selector-tag">OK</span></span><br><span class="line">  <span class="selector-tag">Applying</span> <span class="selector-tag">auth</span><span class="selector-class">.0004_alter_user_username_opts</span>... <span class="selector-tag">OK</span></span><br><span class="line">  <span class="selector-tag">Applying</span> <span class="selector-tag">auth</span><span class="selector-class">.0005_alter_user_last_login_null</span>... <span class="selector-tag">OK</span></span><br><span class="line">  <span class="selector-tag">Applying</span> <span class="selector-tag">auth</span><span class="selector-class">.0006_require_contenttypes_0002</span>... <span class="selector-tag">OK</span></span><br><span class="line">  <span class="selector-tag">Applying</span> <span class="selector-tag">auth</span><span class="selector-class">.0007_alter_validators_add_error_messages</span>... <span class="selector-tag">OK</span></span><br><span class="line">  <span class="selector-tag">Applying</span> <span class="selector-tag">auth</span><span class="selector-class">.0008_alter_user_username_max_length</span>... <span class="selector-tag">OK</span></span><br><span class="line">  <span class="selector-tag">Applying</span> <span class="selector-tag">sessions</span><span class="selector-class">.0001_initial</span>... <span class="selector-tag">OK</span></span><br></pre></td></tr></table></figure>

<p><code>查看表创建成功</code><br><img src="https://upload-images.jianshu.io/upload_images/17844223-70f38c3f6f590635.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h3 id="使用ORM"><a href="#使用ORM" class="headerlink" title="使用ORM"></a>使用ORM</h3><h4 id="新增数据"><a href="#新增数据" class="headerlink" title="新增数据"></a>新增数据</h4><ul>
<li>案例 实现简单的注册功能</li>
</ul>
<p><code>urls.py</code></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">from</span> <span class="selector-tag">django</span><span class="selector-class">.conf</span><span class="selector-class">.urls</span> <span class="selector-tag">import</span> <span class="selector-tag">url</span></span><br><span class="line"><span class="selector-tag">from</span> <span class="selector-tag">django</span><span class="selector-class">.contrib</span> <span class="selector-tag">import</span> <span class="selector-tag">admin</span></span><br><span class="line"><span class="selector-tag">from</span> <span class="selector-tag">app01</span> <span class="selector-tag">import</span> <span class="selector-tag">views</span></span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    url(r'^admin/', admin.site.urls),</span><br><span class="line">    url(r'^login/', views.login),</span><br><span class="line">    url(r'^reg/', views.reg),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p><code>views.py</code></p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">def</span> <span class="selector-tag">reg</span>(<span class="selector-tag">request</span>):</span><br><span class="line">    # 必须要加<span class="selector-tag">if</span>判断，如果加的话，永远访问不了网页</span><br><span class="line">    # IntegrityError at /reg/ (1048, "Column 'name' cannot be null")</span><br><span class="line">    if request.method == 'POST':</span><br><span class="line">        # 接收前台通过<span class="selector-tag">form</span>表单发送的数据</span><br><span class="line">        username = request.POST.get('username')</span><br><span class="line">        password = request.POST.get('password')</span><br><span class="line">        <span class="selector-tag">print</span>(<span class="selector-tag">username</span>, <span class="selector-tag">password</span>)</span><br><span class="line">        # 操作数据库</span><br><span class="line">        # 方式1</span><br><span class="line">        user_obj=models.User.objects.create(name=username, password=password) # User_obj=User object</span><br><span class="line">        <span class="selector-tag">print</span>(<span class="selector-tag">user_obj</span><span class="selector-class">.pk</span>) # <span class="selector-tag">pk</span>获取主键字段对应的值  无论的你主键叫上面名字</span><br><span class="line">        <span class="selector-tag">print</span>(<span class="selector-tag">user_obj</span><span class="selector-class">.id</span>)  # 获取用户数据的<span class="selector-tag">id</span>值,可以看到和<span class="selector-tag">pk</span>的属性是一样的</span><br><span class="line">        <span class="selector-tag">print</span>(<span class="selector-tag">user_obj</span><span class="selector-class">.name</span>) # 获取用户数据的<span class="selector-tag">name</span>值</span><br><span class="line">        <span class="selector-tag">print</span>(<span class="selector-tag">user_obj</span><span class="selector-class">.password</span>)  # 获取用户数据的<span class="selector-tag">password</span>值</span><br><span class="line">        # 方式2</span><br><span class="line">        # user_obj = models.User(name=username, password=password)  # User_obj=User object</span><br><span class="line">        # <span class="selector-tag">models</span><span class="selector-class">.User</span><span class="selector-class">.save</span>(<span class="selector-tag">user_obj</span>)  # 对象调用<span class="selector-tag">save</span>方法保存到数据库</span><br><span class="line">        # <span class="selector-tag">print</span>(<span class="selector-tag">user_obj</span><span class="selector-class">.pk</span>)  # <span class="selector-tag">pk</span>获取主键字段对应的值  无论的你主键叫上面名字</span><br><span class="line">        # <span class="selector-tag">print</span>(<span class="selector-tag">user_obj</span><span class="selector-class">.id</span>)  # 获取用户数据的<span class="selector-tag">id</span>值,可以看到和<span class="selector-tag">pk</span>的属性是一样的</span><br><span class="line">        # <span class="selector-tag">print</span>(<span class="selector-tag">user_obj</span><span class="selector-class">.name</span>)  # 获取用户数据的<span class="selector-tag">name</span>值</span><br><span class="line">        # <span class="selector-tag">print</span>(<span class="selector-tag">user_obj</span><span class="selector-class">.password</span>) # 获取用户数据的<span class="selector-tag">password</span>值</span><br><span class="line">        return HttpResponse('注册成功')</span><br><span class="line">    return render(request, 'reg.html')</span><br></pre></td></tr></table></figure>

<p><code>reg.html</code></p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;!<span class="selector-tag">DOCTYPE</span> <span class="selector-tag">html</span>&gt;</span><br><span class="line">&lt;html lang="en"&gt;</span><br><span class="line">&lt;<span class="selector-tag">head</span>&gt;</span><br><span class="line">    &lt;meta charset="UTF-8"&gt;</span><br><span class="line">    &lt;meta name="viewport" content="width=device-width, initial-scale=1"&gt;</span><br><span class="line">    &lt;title&gt;注册&lt;/title&gt;</span><br><span class="line">    &lt;link rel="stylesheet" href="/static/bootstrap-3.3.7-dist/css/bootstrap.css"&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line">&lt;div class="container"&gt;</span><br><span class="line">    &lt;div class="row"&gt;</span><br><span class="line">        &lt;h1&gt;注册页面&lt;/h1&gt;</span><br><span class="line">        &lt;div class="col-md-6 col-md-offset-3"&gt;</span><br><span class="line">            &lt;form action="" method="post"&gt;</span><br><span class="line">                &lt;p&gt;用户名&lt;input type="text" name="username" class="form-control"&gt;&lt;/p&gt;</span><br><span class="line">                &lt;p&gt;密码&lt;input type="password" name="password" class="form-control"&gt;&lt;/p&gt;</span><br><span class="line">                &lt;p&gt;&lt;input type="submit" class="btn-primary" value="注册"&gt;&lt;/p&gt;</span><br><span class="line">            &lt;/form&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;<span class="selector-tag">script</span></span><br><span class="line">  src="http://code.jquery.com/jquery-3.4.1.js"</span><br><span class="line">  integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="</span><br><span class="line">  crossorigin="anonymous"&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script src="/static/bootstrap-3.3.7-dist/js/bootstrap.js"&gt;&lt;/script&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h4 id="查询数据"><a href="#查询数据" class="headerlink" title="查询数据"></a>查询数据</h4><p><code>models.py</code></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">from</span> <span class="selector-tag">django</span><span class="selector-class">.db</span> <span class="selector-tag">import</span> <span class="selector-tag">models</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># <span class="selector-tag">Create</span> <span class="selector-tag">your</span> <span class="selector-tag">models</span> <span class="selector-tag">here</span>.</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">class</span> <span class="selector-tag">User</span>(<span class="selector-tag">models</span><span class="selector-class">.Model</span>):</span><br><span class="line">    # <span class="selector-tag">User</span>表的主键字段名就是<span class="selector-tag">id</span></span><br><span class="line">    id = models.AutoField(primary_key=True)</span><br><span class="line">    # <span class="selector-tag">varchar</span>(32) <span class="selector-tag">name</span>字段是<span class="selector-tag">varchar</span>(32)  <span class="selector-tag">CharField</span>在定义的时候必须要加<span class="selector-tag">max_length</span>参数，不加直接报错</span><br><span class="line">    name = models.CharField(max_length=32)</span><br><span class="line">    # <span class="selector-tag">varchar</span>(32) <span class="selector-tag">password</span>字段是<span class="selector-tag">varchar</span>(32)  <span class="selector-tag">CharField</span>在定义的时候必须要加<span class="selector-tag">max_length</span>参数，不加直接报错</span><br><span class="line">    password=models.CharField(max_length=32)</span><br><span class="line"></span><br><span class="line">    <span class="selector-tag">def</span> __<span class="selector-tag">str__</span>(<span class="selector-tag">self</span>):</span><br><span class="line">        <span class="selector-tag">return</span> <span class="selector-tag">self</span><span class="selector-class">.name</span>  # 对象输出方式为名字</span><br></pre></td></tr></table></figure>

<p><code>urls.py</code></p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">from</span> <span class="selector-tag">django</span><span class="selector-class">.conf</span><span class="selector-class">.urls</span> <span class="selector-tag">import</span> <span class="selector-tag">url</span></span><br><span class="line"><span class="selector-tag">from</span> <span class="selector-tag">django</span><span class="selector-class">.contrib</span> <span class="selector-tag">import</span> <span class="selector-tag">admin</span></span><br><span class="line"><span class="selector-tag">from</span> <span class="selector-tag">app01</span> <span class="selector-tag">import</span> <span class="selector-tag">views</span></span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    url(r'^admin/', admin.site.urls),</span><br><span class="line">    url(r'^login/', views.login),</span><br><span class="line">    url(r'^reg/', views.reg),</span><br><span class="line">    url(r'^userlist', views.userlist)</span><br></pre></td></tr></table></figure>

<p><code>views.py</code></p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">from</span> <span class="selector-tag">django</span><span class="selector-class">.shortcuts</span> <span class="selector-tag">import</span> <span class="selector-tag">render</span>, <span class="selector-tag">HttpResponse</span>, <span class="selector-tag">redirect</span></span><br><span class="line"></span><br><span class="line"># <span class="selector-tag">Create</span> <span class="selector-tag">your</span> <span class="selector-tag">views</span> <span class="selector-tag">here</span>.</span><br><span class="line"><span class="selector-tag">from</span> <span class="selector-tag">app01</span> <span class="selector-tag">import</span> <span class="selector-tag">models</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">def</span> <span class="selector-tag">userlist</span>(<span class="selector-tag">request</span>):</span><br><span class="line">    # 操作数据库</span><br><span class="line">    user_obj = models.User.objects.all()  # # 获取user表所有的数据</span><br><span class="line">    print(user_obj)  # &lt;QuerySet [&lt;User: lyysb&gt;, &lt;User: lyysb&gt;, 。。。&gt;</span><br><span class="line">    # 只要是<span class="selector-tag">QuerySet</span>就可以点<span class="selector-tag">query</span>查看获取到当前<span class="selector-tag">QuerySet</span>对象的内部<span class="selector-tag">sql</span>语句</span><br><span class="line">    <span class="selector-tag">print</span>(<span class="selector-tag">user_obj</span><span class="selector-class">.query</span>)  # <span class="selector-tag">SELECT</span> `<span class="selector-tag">app01_user</span>`.`<span class="selector-tag">id</span>`, `<span class="selector-tag">app01_user</span>`.`<span class="selector-tag">name</span>`, `<span class="selector-tag">app01_user</span>`.`<span class="selector-tag">password</span>` <span class="selector-tag">FROM</span> `<span class="selector-tag">app01_user</span>`</span><br><span class="line">    return render(request, 'userlist.html', locals())</span><br></pre></td></tr></table></figure>

<p><code>userlist.html</code></p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;!<span class="selector-tag">DOCTYPE</span> <span class="selector-tag">html</span>&gt;</span><br><span class="line">&lt;html lang="en"&gt;</span><br><span class="line">&lt;<span class="selector-tag">head</span>&gt;</span><br><span class="line">    &lt;meta charset="UTF-8"&gt;</span><br><span class="line">    &lt;meta name="viewport" content="width=device-width, initial-scale=1"&gt;</span><br><span class="line">    &lt;title&gt;userlist&lt;/title&gt;</span><br><span class="line">     &lt;link rel="stylesheet" href="/static/bootstrap-3.3.7-dist/css/bootstrap.css"&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line">&lt;div class="container"&gt;</span><br><span class="line">    &lt;div class="row"&gt;</span><br><span class="line">        &lt;h1&gt;用户列表&lt;/h1&gt;</span><br><span class="line">        &lt;div class="col-md-8 col-md-offset-2"&gt;</span><br><span class="line">            &lt;table class="table table-hover table-bordered table-striped"&gt;</span><br><span class="line">                &lt;<span class="selector-tag">thead</span>&gt;</span><br><span class="line">                &lt;<span class="selector-tag">tr</span>&gt;</span><br><span class="line">                    &lt;th&gt;id&lt;/th&gt;</span><br><span class="line">                    &lt;th&gt;name&lt;/th&gt;</span><br><span class="line">                    &lt;th&gt;password&lt;/th&gt;</span><br><span class="line">                &lt;/tr&gt;</span><br><span class="line">                &lt;/thead&gt;</span><br><span class="line">                &lt;<span class="selector-tag">tbody</span>&gt;</span><br><span class="line">                &#123;% for user in user_obj %&#125;</span><br><span class="line">                    &lt;<span class="selector-tag">tr</span>&gt;</span><br><span class="line">                        &lt;td&gt; &#123;&#123; user.pk &#125;&#125;&lt;/td&gt;</span><br><span class="line">                        &lt;td&gt; &#123;&#123; user.name &#125;&#125;&lt;/td&gt;</span><br><span class="line">                        &lt;td&gt; &#123;&#123; user.password &#125;&#125;&lt;/td&gt;</span><br><span class="line">                    &lt;/tr&gt;</span><br><span class="line">                &#123;% endfor %&#125;</span><br><span class="line">                &lt;/tbody&gt;</span><br><span class="line">            &lt;/table&gt;</span><br><span class="line"></span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;<span class="selector-tag">script</span></span><br><span class="line">  src="http://code.jquery.com/jquery-3.4.1.js"</span><br><span class="line">  integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="</span><br><span class="line">  crossorigin="anonymous"&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;script src="/static/bootstrap-3.3.7-dist/js/bootstrap.js"&gt;&lt;/script&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><img src="http://ww2.sinaimg.cn/large/006tNc79gy1g4zx5tzqi1j30rw0ab74r.jpg" alt></p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Gorg Chen</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://cjwnb.top/2019/07/15/undefined/">http://cjwnb.top/2019/07/15/undefined/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/django/">django    </a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/Photo/avatar.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-buttom"><i class="fa fa-qrcode"></i> Donate<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lozad post-qr-code__img" data-src="/img/wechat.jpg"><div class="post-qr-code__desc">微信</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="next-post pull-full"><a href="/2019/07/09/undefined/"><img class="next_cover lozad" data-src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">Next Post</div><div class="next_info"><span>django基础</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-thumbs-up" aria-hidden="true"></i><span> Recommend</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2019/07/08/undefined/" title="模拟一个简单的web请求"><img class="relatedPosts_cover lozad" data-src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png"><div class="relatedPosts_title">模拟一个简单的web请求</div></a></div><div class="relatedPosts_item"><a href="/2019/07/09/undefined/" title="django基础"><img class="relatedPosts_cover lozad" data-src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png"><div class="relatedPosts_title">django基础</div></a></div></div><div class="clear_both"></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i> <span>Comment</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var notify = 'false' == true ? true : false;
var verify = 'false' == true ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;

window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'',
  appKey:'',
  placeholder:'Please leave your footprints',
  avatar:'monsterid',
  guest_info:guest_info,
  pageSize:'10',
  lang:'en',
  recordIP: true
});</script></div></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2018 - 2019 By Gorg Chen</div><div class="framework-info"><span>Driven </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme </span><a href="https://github.com/jerryc127/hexo-theme-butterfly"><span>Butterfly</span></a></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><section class="rightside" id="rightside"><i class="fa fa-book" id="readmode" title="Read Mode"> </i><i class="fa fa-plus" id="font_plus" title="Increase font size"></i><i class="fa fa-minus" id="font_minus" title="Decrease font size"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="Traditional Chinese and Simplified Chinese Conversion">簡</a><i class="fa fa-moon-o nightshift" id="nightshift" title="Dark Mode"></i></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/nightshift.js"></script><script id="ribbon" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/js/piao.js"></script><script src="/js/tw_cn.js"></script><script>translateInitilization()

</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@1.2.2/instantpage.min.js" type="module"></script></body></html>